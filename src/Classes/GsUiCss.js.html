<script id="gs-ui-css">
/**
 * @file GsUiCss.js
 */
class GsUiCss extends GsUi {
  /**
   * @class
   * @summary Toggle a loading animation
   * @public
   * @param {object} config - Module configuration.
   */
  /* eslint-disable class-methods-use-this */
  constructor(config = {}) {
    super();

    // accepts an object of named arguments
    const options = {
      fixedPositionIds: [
        'footer',
      ],
    };

    // private settings
    // Note: when using setAttribute, any non-string value specified is automatically converted into a string.

    // merge config and options objects to create this instance's settings
    this._settings = { ...options, ...config, ...super.settings };

    // subscribe to other module's events

    pubsub.subscribe([ 'domready' ], (data) => {
      this.injectHeightVariables(); // handles new elements added with the run form
    });

    pubsub.subscribe('windowLoad', () => {
      this.injectHeightVariables();
    });
  }

  /* Methods */

  /**
   * injectHeightVariables
   *
   * @summary Store heights of fixed position elements
   */
  injectHeightVariables() {
    const { fixedPositionIds } = this._settings;
    const styleEl = document.getElementById('heights'); // <style></style>
    let cssVariables = '';

    fixedPositionIds.forEach((id) => {
      const el = document.getElementById(id);
      if (el !== null) {
        cssVariables += `
--height-fixed-${id}: ${el.offsetHeight / 16}rem;`;
      }
    });

    const styles = `

:root {
  ${cssVariables}
}
`;

    styleEl.innerHTML = styles;
  }
}
</script>